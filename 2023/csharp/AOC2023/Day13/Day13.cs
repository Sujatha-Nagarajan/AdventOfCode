using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Diagnostics;
using System.Text.RegularExpressions;
//using AOC2023.Utilities;


namespace AOC2023
{
    class Day13
    {
        public string input = @"#..###..#####
###..#.......
.##.#.#.###..
#####....####
#####....####
.##.#.#.###..
###..#.......
#..###..#####
#.##.##.....#
#########.###
#.##.#..#.###
#.##.#..#.###
#########.###
#.##.##.....#
#.####..#####
###..#.......
.##.#.#.###..

.....#########.
#.#..#...#..#..
.####...#.#.#..
#####...#.#.#..
#.#..#...#..#..
.....#########.
###..#....####.
.#...###..#...#
...#########.#.
##.##.##.#####.
##.##.##.#####.
...#########.#.
.#...###..#...#
###..#....####.
.....#########.
#.#..#...#..#..
#####...#.#.#..

#.####..#####
.##..##...###
...##...#####
##..#.##.....
..##.#.#.####
.##....######
.#...###.####
##.##..#.####
#...##.#.....
...#.###.#..#
#.#...###.##.
....#..#..##.
##.......#..#
.#.##..#.####
.#.##..#.####
##.......#..#
....#..#..##.

####.#.
##.#.##
#..#...
.#.#...
######.
...#.#.
...#.#.
######.
.#.#...
#.##...
##.#.##
####.#.
###..#.
##.###.
.....#.
.....#.
##.###.

....##...
..##....#
...#.#.##
...#.#.##
..##....#
....##...
##...#..#
..#.#..#.
...###..#
##.####.#
..#...#..
.#...###.
...#..#..

.#.######.#....
##.#....#.##..#
#.##.##.##.####
#.#...#..#.####
############..#
...#.##.#......
...#....#......
###.#..#.###..#
..########..##.
.##########....
.#.##..##.#.##.

##..#.#
....##.
##...##
#...###
..#.###
.##..#.
...#.#.
...#.#.
.#...#.
.#...#.
...#.#.
...#.#.
.##..#.

.####..###...
..##.......##
##..##..#.#..
........#####
#.##.####..##
#.##.###.#...
##..##.#.....
#.##.######.#
..##..##.#.##
#....##..#.##
##..##...#...
########.##..
#....####.#..
..##..#..####
######.###.##
######.#.##..
..##...#..###

...##.....#..##
..#..#.....#...
##.##.##.#..#..
..#..#...##..##
..........##...
..#..#..##..#..
#......###.#...
#..##..#..#.###
........#.#....
##....##.#.##..
##.##.###.#..##
##....###.##.##
#.####.#.#..#..
.######...##...
...##..##..#.##
.##..##.#.###..
.#....#.##.##..

.#.##..##.#
..##.##.##.
##..#..#..#
.#..####..#
#..........
..##....##.
..##....##.
##..####..#
.##########
#....##....
..##.##.##.
#..........
#####..####

#....##....
.#....#.#..
..#...#.###
###...###..
....#.#.###
#.#.##.####
..#######..
.##...#.#..
.##...#.#..
..#######..
#.#.##.####
....#.#.###
.##...###..
..#...#.###
.#....#.#..

.#....##..#
#.#..###..#
#.##...#..#
#..#####..#
####.#.#..#
.#.###.#..#
####...#..#
.##.#.#.##.
#....#.####
#.##...#..#
##..####..#
.###..##..#
.#.#..##..#
##..####..#
#.##...#..#

#..##.#.#.#..
#..##.#.#.##.
.##..#.....#.
.##..##......
#####..######
#.###.##...##
...##.#..##..
#.##...#..#.#
...#..###..##
#.#.##..#.#.#
.....#..#####
#.#...#.#...#
#.#...#.#...#
.....#..#####
#.#.##..#.#.#
...#..###..##
#.##...#..#.#

#..#.##..####
####...#.####
.##..#..##..#
.#..#.#.##..#
.###...#.....
#.#.###.#####
#.#.#########

#.##.##.##.##..##
...#....#...#....
.....##.....#.###
#...####...#.#...
..#.####.#..#.#..
#....##....####..
#...#..#...#.####
.#.######.#..#.##
##.#.##.#.#####..
.##......##.#.###
..###..###....###
............##...
###.####.###..###
#..##..##..#.....
.#..#.##..#...#..

.......#..##.##
..##...#.##.#.#
##..##.##.#..#.
##..######...#.
######..######.
..##..#.####..#
#.##.#.#.#..##.
######...##..##
##########...##
##..####.##....
######...##....
..##..####.##.#
..##..###.#.#.#

#####.#.######.
#.##.#####.##.#
...#...#..##.##
.#......#..#.##
.#......#..#.##
...#...#..##.##
#.##.#####.##.#
#####.#.######.
....#.####.####
...####..#.###.
...####.#.#.###
...####.#...###
...####..#.###.

###..####
....###.#
....###.#
#.#.##...
..#.....#
..#.....#
#.#.##...
....###.#
....###.#
###..##.#
....#.#..
##....##.
.#.#.....
.#.#.....
##....##.

....##.
.##....
..##..#
#.#####
##.####
###....
##.....
##.####
#.#####
..##..#
.##....
....##.
.#..##.
#.#....
.#..##.

..#..#....##..#
..#..#......##.
##....##..#...#
.######.##..##.
##....###.##..#
.#.##.#...#....
#.####.#.##....

.#.#...#.#.#..#
...###...##.##.
.##.....#......
.##.....#......
...###...##.##.
.#.#...#.#.#..#
#..##...###.#..
..#.#.#.#..###.
..#.#.#.#..###.
#..##...###.#..
.#.#...#.#.#..#
...###...##.##.
###.....#......

..#..#.#..#
..#..#.#..#
###..##...#
######.#.##
##....#####
..##.#.##..
..##...###.
...#....###
..#.##..#..
##.......##
##..##...#.
##..####.##
##..#.....#
.####..#..#
..##.....#.

##..########...
#....###...#...
.......#.#...##
#....##..#.##.#
#######.#..#.##
..##...##....#.
#.##.#.#.###..#
#.##.##.#.##...
#.##.#.####...#
.#..#..#.#...##
.#..#..#.#...##
#.##.#.####...#
#.##.##.#.##..#

##.##.###.....#
.....###.###.##
...#.#.##..##..
..#.######..#..
...#.#..#.##.##
..#..#.###.....
..##..#....##..

.#.###..##.
.#...#####.
#..##.###.#
..####.#...
#..#...#...
####.##..##
..###......
..###......
####.##..##
#..#...#...
..####.#...
#..##.#.#.#
.#...#####.
.#.###..##.
.#.###..##.

##..##..#####..
#.##.##..#...#.
#....#.##.#..##
##..######..###
..##...##..##..
..##...##..##..
##..######..###
#....#.##.#..##
#.##.##..#...#.
##..##..#####..
....#.##..##.##
#.##.##.##..##.
.#..#.#..##.###

.#..########..#..
#...#......#...##
.#....####....#..
######.##.#######
...##.#..#.##....
#....######.#..##
###....##....####
##.###.##.###.###
##.#..####..#.###
#..##......##..##
#.##...##...##.##
....########.....
.###.##..##.###..
.##..##..##..##..
##...#.##.#...###

..#.##.#....#
##.#..#.####.
.########..##
#.#.##.#.##.#
..######....#
#..#..#..##..
#.#.##.#.##.#
.#..##..#..#.
...#..#......
#...##...##..
#.##..##.##.#
#.######.##.#
##.#..#.###..

..#.#####..
###..#.#.##
..##..##.#.
..##..####.
###..#.#.##
..#.#####..
....##.####
..##.#.....
..#.##.####
#####...#..
#####......
###.#.#.#..
..#...#####

.##.#..#.#..##...
..#..##.......#..
###..###.#..##.##
###.#.#####....##
....#.###.###.###
##.#.#...##.##...
###.#.####.#.#...
..#.#.###.##..###
##.#.#.....#.....
.....##.##..#.###
..#.#..######.###
..#..##.#####.###
##..##.##..###.##

...#...##
.#....###
..#.#.#..
.#.###.##
.##......
#..#..#..
#...#####
#.#.###..
#.#.#.#..
.##...###
.##...###
..#.#.#..
#.#.###..

....####.##..##
#..###.#.#...##
#..###.#.#...##
....####.##..##
...##..##.#..#.
##.##.##....##.
#.#...##...#.##
..###.....#.#..
#.##.#..###.#..
...##.#....#..#
#...##.######..
##.###...#....#
##.#.##...##..#
####........###
####........###
##.#.##...##..#
#..###...#....#

..#......#..#..
..#......#..#..
##..####..##.##
.##########.#..
.#.#....#.#.###
##.######.###..
##.######.##...
..########.#.##
.#........#...#
....####......#
############...
####.##.####.##
.#.#....#.#.#..

##..###.#..##
#.##.#.###.#.
#.##.#.###.#.
##..###.#..##
.....#.#.##..
........#....
..##.....#..#
#.##.#.#..#..
.####..#.###.
.####..#.#.##
.####.#....#.

#..#..#.#.###
#...#.##.##.#
..##....#....
####..###...#
####..###...#
..###...#....
#...#.##.##.#
#..#..#.#.###
###.##...#...
.##..#.###.##
..##...##..##
..#.#..##...#
..#.#..##...#
..##...##..##
.##..#.###.##

##.##..
...#..#
...#..#
##.##..
#.#####
##.#...
##.#.##
..#..##
####.##

..#......#.#...
.##......##...#
##..####..####.
.....##.....###
##..#..#..##.#.
.#.##..##.#...#
#...#..#...#..#
#...#..#...#..#
.#.##..##.#...#
##..#..#..##.#.
.....##.....###
##..####..####.
.##......##...#

#.#..#...
#.#..#...
...####.#
.##....##
###....##
...####.#
#.#..#...

...#.#.##.#.#..
.#..#......#..#
#.##.#.##.#.##.
#.##.#.##.#.##.
.#..#......#..#
...#.#.##.#.#..
..#.#.#..#.#.#.
.#.#...##...#.#
.###.######.###
####.#....#.###
...#..####..#..
..#...#..#...#.
#...#.####.#...
#..##########..
#...##.##.##..#
#...#.#..#.#...
##.#.######.#.#

####....###
###.####.##
....#..#...
....####...
..#......#.
##...##...#
..########.
..###..###.
..##.##.##.
####.##.###
##..####..#
###..##..##
..##....##.
####.##..##
##...##...#
####....###
##..#..#..#

.##.###.###
.##.##..###
.##.##..###
.##.###.###
...#.#..#.#
..##...#...
##.#.#..#.#
#.##..#..#.
...###...#.
..#..##....
..#.##.####
......##...
##.#...#..#

......#..#...
...#.###.#...
##.#...###.##
##.#...###.##
...#.###.#...
...#..#..#...
###.####.#..#
###.#.#..##..
#######.#.###
##.##..#.###.
....##.#.##.#
###.###.#..#.
...#####...##

#.##...#.#..###
##.#..#.#....#.
#..#..#.#....#.
#.##...#.#..###
##.###.##..#...
...#......#...#
.#.....#..#.##.
.###..#...#.###
.#...#####..##.
.#...#####..##.
.###..#...#.###
.#.....#..#.##.
...#......#...#

...###..##..#
..###..###..#
..####.###..#
...###..##..#
..#...#.###..
..#...###.#..
..#..#.#.....
##..###.###.#
...##..#..#.#
...#..#..##..
###.##...#.##
..##.#.#..#..
..##.####.###

##.##.##...##..
#.#.#..###.##.#
#.#.#..###.##.#
##.##.##...##..
#..###..#..##..
##..##.###.##.#
.#..###...####.
.#.#####.#..#.#
#..#...##.#..#.

######.
..#....
##..#.#
.###.#.
#.#####
....#.#
....#.#
#.#####
.#.#.#.
##..#.#
..#....
######.
######.

##..#.#....
##..#.#....
..#.#.#....
#######.##.
#.###...##.
###.##..##.
..#........
.####.#....
#.##...##.#
####...####
..##.#..##.
..#.#......
..##.#.....

.##.##...
#...#.#..
.##....#.
........#
#..##..#.
.##.#.#.#
....#..#.
####..##.
####..#.#
####..#.#
####..##.

##..##.#..#.##.
####..#.##.#..#
..#.#...##...#.
.#..##.####.##.
#.##..##..##..#
.##.##.#..#.##.
.##....#..#....
#..#####..#####
#.#############
.#..##.####.##.
.#..##.#..#.##.
#..#..#.##.#..#
.######.##.####

.#..#...#####....
#.#.#.#.###...###
.#..##..#.#.#.#.#
.#######..#.#.###
...#.......######
.##...##.#.##..##
.#.##...###.#.###
.#.##...###.#.###
.##...##.#.##..##

###..####.#
###..####..
#....##.#..
#.....#.###
.#.##..###.
.#.##....#.
.##.##..#.#
.#..##.#...
...#.##.##.
...#.##.##.
.#..##.#...
.##.##..#.#
.#.##....#.
.#.##..###.
#.....#.###

.#.##.#
#......
.##..##
...##..
...##..
.##..##
#......
.######
.#....#
#.#..#.
###..##
..#..#.
#......
##....#
.######
##....#
.#....#

.#..#.#.##....#
.....#.##...#.#
.....#.##...#.#
.#..#.#.##....#
.####..#..##..#
...###...##.##.
..##.#..##..#..
##..#.#####...#
#.###.#.....#.#
#.#.##.##..##.#
#.#.##.##..##.#
#.###.#.....#.#
##..#.#####...#
..##.#..##..#..
...###...##..#.

..#.##.###.#.
#..##...#.#..
#.##...#..##.
#.###.##.#...
.#.##....#...
#.##.###..#..
......#.#.#.#
......#.#.#.#
#.##.###..#..
.#.##....#...
#.###.##.#...
#.##...#..##.
#..##...#.#.#
..#.##.###.#.
..#.##.###.#.

.##.#.#.##.
.##.##....#
.##.##....#
.##.#.#.##.
.##.##.#.##
#..#..#.#..
.....##.##.
.##.##.....
....###...#
.#####....#
#####.#...#
#####...#..
#..#.#.####
.##.#####.#
.##..##..##

...##.#..#.
.#.##.####.
.#...#.##.#
#.#########
..#########
##...#....#
##...#.##.#
..#########
#.#########

###..##..########
....#..#.#..####.
#.#..##..#.#....#
..#..##..#..#..#.
##.#....#.#######
###......###....#
.#.##..##.#.####.
#...####...######
.#.#.##.#.#......
###.####.###....#
#..........#....#
..#.####.#..#..#.
...##..##....##..
.#.##..##.#..##..
...##..##........
.#.#....#.#......
..##.##.##...##..

..#.#....##
......#....
...#...#.#.
.###..#.#..
.#.#.##..##
#..####..##
#..####..##

....#...#
###.#...#
#####..##
#######..
..#.##.#.
##..#....
###..##.#
###..##.#
##.##....

..##.#...#..#
..#..###..###
###.....#.#..
..##..#...#.#
##....#..##..
##....#..##..
..##..#...#.#
###.....###..
..#..###..###
..##.#...#..#
####...#..###
..#.##..#..##
..#...##.#...

..#..##.##..#.#
#####....#.##..
.#..##..######.
#####...##.####
..##.#.##....##
...#####.#.####
..##..#...#.###
.###..#...#.###
...#####.#.####
..##.#.##....##
#####...##.####
.#..##..######.
#####....#.##..
..#..##.##..#.#
.###..###.#.#.#
.###..###.#.#.#
..#..##.##..#.#

#...#.#..
#...#.#..
..##.#...
##..##...
.#...##..
#..###.##
#.#####..
.#....##.
.#..###..

#..##..#.#...##.#
......#....####.#
.##.####.######.#
........####.#..#
#####.#..##.#....
#..##..#.###..#.#
#..####.########.
#..####..#######.
#..##..#.###..#.#
#####.#..##.#....
........####.#..#

#...##.##.#..
##.##..###.##
#.######...##
##.#.########
.#....#......
#.#..##.##...
.##.#.##...##
##..###.#....
..####...#.##
.##.####..###
#...##.#.##..
#...##.#.##..
..#.####..###

#....#.
#.###..
#.###..
#....#.
..###..
.####..
.....#.
...#.#.
####..#
..###..
#...#..
......#
##...#.
##...#.
......#
#...#..
...##..

#..#..#.####.#.
..#.###.#####..
.....#.###...#.
..#....#.#.##.#
..##..##.#.####
..#####.....#..
..#####.....#..
.###..##.#.####
..#....#.#.##.#
.....#.###...#.
..#.###.#####..
#..#..#.####.#.
.#####.##.#..##
.#####.##.#..##
#..#..#.####.#.

......#
..##...
......#
.#..#.#
##..###
#....##
##..##.
##..###
##..###
##..##.
#....##
##..##.
.#..#.#
......#
..##...

#....##.#
.######.#
#.#..##.#
.#.###.##
.#.###.##
#.#..##.#
.######.#
#....##.#
#..###...
..#.#..#.
#.###.##.
###.#####
.###..##.
#.###.##.
#.###.##.
.####.##.
###.#####

.#.##.#.#..#.
.#.##.#.#....
##.##.##....#
..###...##..#
...##....#.##
.....##.##.##
###.....#.###
.##.###.#..#.
.##.###.#..#.
###.....#.###
.....##.##.##

######.######
.##....#...##
#####.#.##...
.##.#.###..##
.....#...#...
#..#####.#.##
#######.#....
.##...#..#.##
....##..###..
##.###...#...
.##.##.......
.....#.###...
#####.##...##
.##.......###
.##..##..##..

#......#..#....##
#..##..##....####
#.####.##..#.##.#
..#..#..#..#..#.#
.#....#..#.##..#.
##.##.###.##.####
........#.#...#..
.#....#.##.....#.
...........##..##
##.##.#####......
##..#.##.#..#.##.
#..##..#.#.####.#
#..##..#.#.####.#

.#..#..#..#
.###....###
#..#.##.#..
####....###
####....###
#..#.##.#..
.###.##.###

....#..##..#.....
.##.#......#.##..
.######..###.##..
.......##........
##.#........#.###
#..#..####..#..##
.##...####...##..
####........#####
..###.#..#.###...
.####.####.####..
.#..###..###..#..
.###..####..###..
..#.#.####.#.#...
..#.##.##.##.#...
##....####....###
#.##..####..##.##
###..#.##.#..####

.##.##.....##
#.#..#...#.#.
..##...##.###
..##...##.###
#.#..#...#.#.
.##.##....###
##..#.....#.#
.#..#..#.####
....#####.##.
....#####.##.
.#..#..#.####

#..#..######..#..
.##.#.#....#.#.#.
#.#.#...##...#.#.
.....##....##....
.#.#..#....#..#.#
#.....##..##.....
#.....##..##.....

.####.##.##.##.
..##...#....#..
.####.#.####.#.
.......######..
..##...........
#....#...##...#
.####...####...
.......#....#..
......#.####.#.
##..###########
######.##..##.#
.####.#.#..#.#.
......##....##.
#.##.##########
.......#.####..

#.#....#.#..#
.###..###.#..
.##....##...#
...#..#....##
#........#.#.
####..####...
....##....##.
....##....##.
####..####.#.

.###.#.###..#
.....#####.##
.#.##.##..##.
...##..#.##..
######...#...
######...#...
...##..#.##..
.#.##.##..##.
.....#####.##
.###.#.###..#
###...##.#.#.
..#..##.#.#.#
###.#..#...#.
#.##.##.#..##
#.##.##.#..##
###.#..#...#.
.....##.#.#.#

...#..#.#.#
#...#.#..##
...#.#.#.#.
#.###...#..
....#...##.
....#...##.
#.###...#..
...###.#.#.
#...#.#..##
...#..#.#.#
.#...###...
####....#..
####....#..
.#...###...
...#..#.#.#
#...#.#..##
...###.#.#.

.#...#.
.#...#.
#...#..
##.#..#
#####.#
..#....
##...##
##...##
#.#....
#####.#
##.#..#
#...#..
.#...#.

.....###......#
.##...#...#....
#..##..##.###..
....##.#....#.#
#####...###....
.##..##....#.#.
#..#..#..#...##
####.#.#####.#.
.##...##....#..
....#.##.#####.
....#.##.#####.
.##...##...##..
####.#.#####.#.
#..#..#..#...##
.##..##....#.#.
#####...###....
....##.#....#.#

.##..##..#.
.######..#.
#.####.##..
#.#....#.#.
.######.##.
#..##..#..#
###..###.##
#..##..#...
.#.##.#..#.
#.####.#...
.######..#.
#########.#
#.####.#...
.#.##.#..##
.######.##.
.######.##.
.#.##.#..##

#.#....###....#
#.#.####.######
.####.#...#..#.
#....#..#######
##.#.#....####.
#####..#.######
#####..#.######
##.#.#....####.
#.......#######

.#..##.##
#.....###
.##.#.###
#..#.#...
#..##..##
...##....
#...#..##
.####.#..
##..#####
.#....#..
.#..#....
......#..
......#..
.#..#....
.#...##..
##..#####
.####.#..

...##############
..##.....##......
#.....###.##.##.#
#.#.##.#####....#
##.#....#.....#..
#...#..##.#.####.
.##.#..#.##.#..#.
#...##..#..#....#
#...##..#..#....#

.##.#####
#...#..#.
#.#..##.#
##....#..
.#..##.#.
.#..##.#.
##....#..
#.#..##.#
#...#..#.
..#.#####
.##.#.##.
..#..#.##
#####..#.
#####..#.
..#..#.##

.#.#......#.#..
#..########..##
.####....####..
#..###..###..##
#.##..##..##.##
..#........#...
.############..
#..#.#..#.#..##
##.########.###
.##.###.##.##..
.#....##....#..
###...##...####
##..##..##..###

.##.#..#..#..
.......#..#..
.###.#.####.#
..####.#..#.#
......######.
.#####.#..#.#
.##..########
..##.#.#..#.#
....###....#.
#...#..#..#..
#...#..#..#..

##..#..#.
##..#..#.
#.###.##.
#..#...##
.#.#...##
.##....##
....##..#
....##..#
.##....##
.#.#...##
#..#...#.

##.##.#..
..#....#.
######.##
..####.#.
....#.##.
###.###..
..###.#.#
##...#.##
..##.#.##
##..#..#.
..#.###.#
....#..##
..#...##.
..###.##.
..#.##...
###.#.###
###.#####

##..##..#
.##.#.#.#
...#.##..
#..#.##..
.#####...
..##.####
..#..####
..#..####
..##.####

...####....
##......###
#.#....#.##
#.######.##
#..#..#..##
#.##..##.##
##..##..#..

.....##.###..###.
#....##.###..###.
.##....##.####.##
.#.##.#####..####
#.....#.###..###.
##..#.#..#.##.#..
##.#.....#....#..
#.#.#.##..####..#
####..###.#..#.##

.#..##.#.#####.
.#..##.#.#####.
#..#.#.###.#...
.#.#.#.##..#...
..#...#.#...##.
......#.####.##
###...##.#..###
##....##.#..###
......#.####.##

#.###.#
####...
.#....#
.#....#
####...
#.###.#
#.###..
###.###
.....##
.##..##
###...#
##....#
.##..##
.....##
###.###

#.##.##.##.#..#
..##....##..###
.####..####...#
.####..####..##
#.##.##.##.#..#
############.#.
############...
#.##.##.##.#...
############...
#.##.##.##.#.##
.####..####.##.
##..####..##...
#.##.##.##.####
#....##....###.
############.#.
............###
..###..###..##.

.#..#.#.#.#.#....
#########.##.####
#########.##.####
.#..#.#.#.#.##...
#.##.#.#..#.#....
..#####.#.#..#...
.##.#.#...##.#...
...###.#.##..#...
#.....###....#.#.
..#..####.##..##.
#.#..#...####....
#.#..#...####....
..#..####.##..##.
#.....###....#.#.
...###.#.##..#...
.##.#.#...##.#...
..#####.#.#..#...

.##.##.##..##
...####..##..
#..#.....##..
.##.##.#.##.#
####.#...##..
#..#####.##.#
.##.#.#.#..#.
######.######
....#.##.##.#

.#######..#..
...#.#.#...##
...#.#.#....#
.#######..#..
.#######..#..
...#.#.#....#
...#.#.#...##
.#######..#..
.#..#.#.##.#.
....####.....
#..##.#.#####
##...########
.##.#...#..#.

..#..##..##
..#..##..##
##...#.#.#.
#.#.#.#....
.###..####.
##.#.....##
..#.#.##..#
...#...##..
#########.#
#####.###.#
...#...##..
..#.#.##..#
##.#.....##
.###..####.
#.#.#.#....";


        public void Solve()
        {
            var watch = Stopwatch.StartNew();
            SolveA(0);
            watch.Stop();
            Debug.WriteLine($"Elapsed {watch.ElapsedMilliseconds}ms");

            watch = Stopwatch.StartNew();
            SolveA(1);
            watch.Stop();
            Debug.WriteLine($"Elapsed {watch.ElapsedMilliseconds}ms");
        }

        private int FindReflections(string[] lines, int diff)
        {
            foreach(var i in Enumerable.Range(1, lines.Length-1))
            {
                var aList = lines.Take(i).ToArray().Reverse();
                IEnumerable<string> bList = lines.Skip(i).ToList();
                var len = Math.Min(aList.Count(), bList.Count());
                aList = aList.Take(len);
                bList = bList.Take(len);

                var d = (from e in aList.Zip(bList, (left, right) => (left, right))
                            let s = (from index in Enumerable.Range(0, e.left.Length)
                                    where e.left[index] != e.right[index]
                                    select 1).Sum()
                            select s).Sum();
                if(d==diff)
                {
                    return i;
                }
            }
            return 0;
        }

        public void SolveA(int diff)
        {
            var grids = input.Split("\r\n\r\n");
            int total = 0;
            foreach(var grid in grids)
            {
                var lines = grid.Split("\r\n");
                var r = FindReflections(lines, diff);

                // get transpose of array
                var transpose = new List<string>();
                foreach(var col in Enumerable.Range(0,lines[0].Length))
                {
                    var s = string.Join("",(from row in Enumerable.Range(0, lines.Length)
                                   select lines[row][col]).ToArray());
                    transpose.Add(s);
                }
                var c = FindReflections(transpose.ToArray(), diff);
                //Debug.WriteLine($"row {r}, col {c}");
                total += c + (100 * r);

            }
            Debug.WriteLine($"total {total}");
        }

    }
}
